package com.theincgi.advancedmacros.hud.hud2D;import com.mojang.blaze3d.systems.RenderSystem;import com.theincgi.advancedmacros.misc.Utils;import net.minecraft.client.MinecraftClient;import net.minecraft.client.font.TextRenderer;import net.minecraft.client.gui.DrawContext;import net.minecraft.client.render.DiffuseLighting;import net.minecraft.client.render.item.ItemRenderer;import net.minecraft.client.util.math.MatrixStack;import net.minecraft.item.ItemStack;import org.luaj.vm2_v3_0_1.LuaError;import org.luaj.vm2_v3_0_1.LuaValue;import org.luaj.vm2_v3_0_1.lib.OneArgFunction;import org.luaj.vm2_v3_0_1.lib.TwoArgFunction;public class Hud2d_itemIcon extends Hud2DItem {    static ItemRenderer itemRender = MinecraftClient.getInstance().getItemRenderer();    static TextRenderer fontRenderer = MinecraftClient.getInstance().textRenderer;    int wid, hei;    ItemStack itemStack;    public Hud2d_itemIcon() {        super();        itemStack = ItemStack.EMPTY;        controls.set("setItem", new TwoArgFunction() {            @Override            public LuaValue call(LuaValue item, LuaValue quantity) {                if (item.isnil()) {                    throw new LuaError("Item cannot be nil");                }                setStack(item.checkjstring());                if (!quantity.isnil()) {                    itemStack.setCount(quantity.checkint());                }                return NONE;            }        });        controls.set("setCount", new OneArgFunction() {            @Override            public LuaValue call(LuaValue arg) {                itemStack.setCount(arg.checkint());                return NONE;            }        });        wid = hei = 16;    }    public void setStack(String text) {        //Item i = Item.getByNameOrId(text);        if (text == null) {            itemStack = ItemStack.EMPTY;            return;        }        if (!text.contains(":")) {            text = "minecraft:" + text;        }        int indx = text.lastIndexOf(":");        String end = text.substring(indx + 1);        try {            int dmg = Integer.parseInt(end);            itemStack = Utils.itemStackFromName(text.substring(0, indx)); //TESTME            itemStack.setDamage(dmg);        } catch (NumberFormatException e) {            itemStack = Utils.itemStackFromName(text);        }    }    public void setCount(int optint) {        itemStack.setCount(1);    }    @Override    public void render(DrawContext drawContext, float partialTicks) {        MatrixStack matrixStack = drawContext.getMatrices();        matrixStack.push();        applyTransformation(matrixStack);        DiffuseLighting.disableGuiDepthLighting();        DiffuseLighting.enableGuiDepthLighting();        drawContext.drawItemInSlot(MinecraftClient.getInstance().textRenderer, itemStack, 0, 0);        DiffuseLighting.disableGuiDepthLighting();        RenderSystem.bindTexture(0);        matrixStack.pop();    }}